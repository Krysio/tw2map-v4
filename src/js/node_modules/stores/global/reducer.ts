import {
    State,
    IMPORT_DB, SET_DONT_SPY, SET_GDRP_SHOWN
} from './types';

/******************************/

const INIT_STATE: State = {
    dontSpy: false,
    gdrpShown: false
};

/******************************/

export function reducer(state = INIT_STATE, action) {
    switch (action.type) {
        case IMPORT_DB:
            let data = {};

            for (let i = 0; i < action.value.length; i++) {
                let { key, value } = action.value[ i ];

                if (key in INIT_STATE) {
                    data[ key ] = value;
                }
            }

            return {...state, ...data};
        case SET_DONT_SPY:
            return {...state, dontSpy: action.value};
        case SET_GDRP_SHOWN:
            return {...state, rodoShown: action.value};
        default:
            return state;
    }
}