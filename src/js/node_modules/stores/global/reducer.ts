import {
    State, INIT_STATE,
    IMPORT_DB
} from './types';

/******************************/

export function reducer(
    state = INIT_STATE,
    action
): State {
    switch (action.type) {
        case IMPORT_DB:
            let data = {};

            for (let i = 0; i < action.value.length; i++) {
                let { key, value } = action.value[ i ];

                if (key in INIT_STATE) {
                    data[ key ] = value;
                }
            }

            return {...state, ...data};
    }

    // defualt

    let key = `${ action.prefix }_${ action.type }`;

    if (!Object.prototype.hasOwnProperty.call(state, key)) {
        return state;
    }

    return {
        ...state,
        [ key ]: action.value
    };
}