import debug from 'debug';
import State from 'stores/state/state';
import Location from 'stores/@/Location';

/******************************/

const debugLog = debug('app:sotres:state:reducer');

const INIT_STATE = new State().init();

/******************************/

export function reducer(
    state = INIT_STATE,
    action
): State {
    let newState: State;

    debugLog(action.type, action);
    debugLog('in', state);

    switch (action.type) {
        case 'setMapKeys': {
            let newState = new State(),
                newLocation = new Location();

            newLocation.marketKey = action.marketKey;
            newLocation.worldKey = action.worldKey;
            newLocation.command = action.command;
            newLocation.value = action.value;

            Object.assign(newState, state);
            newState.location = newLocation;

            return newState;
        } break;
        default: null;
    }

    return state;
}