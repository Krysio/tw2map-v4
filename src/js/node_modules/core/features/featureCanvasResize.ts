import Renderer from "core/Renderer";
import State from "core/State";

/******************************/

export default function featureCanvasResize(
    canvas: HTMLCanvasElement,
    renderer: Renderer,
    state: State
): void {
    let setBodySize = (function() {
        let { clientWidth: width, clientHeight: height } = canvas.parentElement;

        canvas.setAttribute('width', width.toString());
        canvas.setAttribute('height', height.toString());

        Object.assign(canvas.style, {
            width: `${ width }px`,
            height: `${ height }px`
        });

        state.setScreenSize(width, height);
        this.updateResolution();
    }).bind(renderer);

    window.addEventListener(
        'resize',
        () => {
            setBodySize();
            setTimeout(setBodySize, 10);
        },
        false
    );
    setBodySize();
}