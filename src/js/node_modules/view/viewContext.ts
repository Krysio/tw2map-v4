import { Context } from "context";
import ModalManager from "libs/ModalManager/ModalManager";
import serviceColorPicker from 'view/services/serviceColorPicker';
import servicePrompt from 'view/services/servicePrompt';
import serviceMenu from "view/services/serviceMenu";
import DragDrop from "view/DragDrop";

/******************************/

export default function createViewContext(
    context: Context
) {
    const modalSystem = new ModalManager();
    const refContext = {};
    const newContext = {
        ...context,
        modalSystem,
        services: {
            colorPicker: serviceColorPicker(modalSystem),
            prompt: servicePrompt(modalSystem),
            menu: serviceMenu(modalSystem),
        },
        dragDrop: new DragDrop(refContext)
    };

    Object.assign(refContext, newContext);

    return refContext as typeof newContext;
}
export type ViewContext = ReturnType<typeof createViewContext>;