import Item from 'map/data/MapData/Item';
import Village from 'map/data/MapData/Village';
import Tribe from 'map/data/MapData/Tribe';

/******************************/

export default class Character extends Item {
    tribeId: number = null;
    tribe: Tribe = null;
    villages: {[key: number]: Village} = {};
    villageCount = 0;
    rank: number = null;
    pointsDef: number = null;
    pointsOff: number = null;
    pointsTotal: number = null;

    /******************************/

    setActivity (value) {
        if (!this.activity) {
            this.activity = value;
        } else {
            if (this.activity > value) {
                this.activity = value;
            }
        }
    }

    /******************************/

    addVillage(village: Village) {
        if (!this.villages[ village.id ]) {
            this.villageCount++;
            this.villages[ village.id ] = village;

            if (this.tribe) {
                this.tribe.villageCount++;
            }
        }
    }

    getVillages(): Village[] {
        var array: Village[] = [];

        for (let x in this.villages) {
            array.push(this.villages[ x ]);
        }

        return array;
    }
}
