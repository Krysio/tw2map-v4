import Events from "canvas/Events";
import { MapDataApi } from "data";

/******************************/

export default function featureClick(
    events: Events,
    mapData: MapDataApi
): void {
    let previousVillage = null;

    events.on('click/tile', ({x, y}) => {
        let village = mapData.getVillageByCoords(x, y);

        previousVillage = village;
        events.emit('click/item', village);
    });
    events.on('changed canvas/move', () => {
        if (previousVillage !== null) {
            previousVillage = null;
            events.emit('click/item', null);
        }
    });
}