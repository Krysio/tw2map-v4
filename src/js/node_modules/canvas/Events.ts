import { EventEmitter } from "events";
import debug from 'debug';
import Item from 'data/data/Item';

/******************************/

const debugLog = debug('app:canvas:events');

type coords = {x: number, y: number};

interface EventList {
    'changed hover/tile': coords,
    'changed hover/item': Item,
    'click/tile': coords,
    'click/item': Item,
    'changed position/tile': coords,
    'changed canvas/size/tile': number,
    'changed canvas/move': boolean,
    'canvas/enter': void,
    'canvas/leave': void
}

/******************************/

export default class Events extends EventEmitter {
    emit<Key extends keyof EventList>(
        command: Key,
        data: EventList[ Key ]
    ): boolean {
        debugLog(command, data);
        return super.emit(command, data);
    }
    on<Key extends keyof EventList>(
        command: Key,
        listener:
            EventList[ Key ] extends void
                ? () => void
                : (data: EventList[ Key ]) => void
    ): this {
        return super.on(command, listener);
    }
    removeListener<Key extends keyof EventList>(
        command: Key,
        listener:
            EventList[ Key ] extends void
                ? () => void
                : (data: EventList[ Key ]) => void
    ): this {
        return super.removeListener(command, listener);
    }
}