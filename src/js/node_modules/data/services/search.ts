import MapData from "data/data/MapData";
import Item from "data/data/Item";

/******************************/

export default function serviceSearch(
    mapData: MapData
) {
    return {
        search(phase: string): Item[] {
            let results: Item[] = [],
                temp: number;

            // tribes
            temp = 0;
            for (let id in mapData.tribeMap) {
                let item = mapData.tribeMap[ id ];

                if (item.name.toLowerCase().indexOf(phase) !== -1
                    || item.tag.toLowerCase().indexOf(phase) !== -1
                ) {
                    results.push(item);

                    temp++;
                    if (temp > 10) {
                        break;
                    }
                }
            }

            // characters
            temp = 0;
            for (let id in mapData.characterMap) {
                let item = mapData.characterMap[ id ];

                if (item.name.toLowerCase().indexOf(phase) !== -1) {
                    results.push(item);

                    temp++;
                    if (temp > 10) {
                        break;
                    }
                }
            }

            // villages
            temp = 0;
            for (let id in mapData.villageMap) {
                let item = mapData.villageMap[ id ];

                if (item.name.toLowerCase().indexOf(phase) !== -1) {
                    results.push(item);

                    temp++;
                    if (temp > 10) {
                        break;
                    }
                }
            }

            return results;
        }
    };
}