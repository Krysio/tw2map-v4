import Item from './Item';
import Village from './Village';
import Tribe from './Tribe';

/******************************/

export default class Character extends Item {
    mapItemType = 'character';
    tribeId: number = null;
    tribe: Tribe = null;
    villages: {[key: number]: Village} = {};
    villageCount = 0;
    rank: number = 0;
    pointsDef: number = 0;
    pointsOff: number = 0;
    pointsTotal: number = 0;

    /******************************/

    setActivity (value) {
        if (!this.activity) {
            this.activity = value;
        } else {
            if (this.activity > value) {
                this.activity = value;
            }
        }
    }

    /******************************/

    addVillage(village: Village) {
        if (!this.villages[ village.id ]) {
            this.villageCount++;
            this.villages[ village.id ] = village;

            if (this.tribe) {
                this.tribe.villageCount++;
            }
        }
    }

    getVillages(): Village[] {
        var array: Village[] = [];

        for (let x in this.villages) {
            array.push(this.villages[ x ]);
        }

        return array;
    }
}
